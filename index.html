<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CamColors</title>

  <script src="js/jquery-1.8.3.min.js"></script>
  <script src="js/functions.js"></script>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  
  <video id="webcam-stream" autoplay></video>
  <canvas width="400" height="300" id="canvas-stream"></canvas>
  <div id="color"></div>

  <script>
    $(document).ready(function() {  

      var video = document.getElementById('webcam-stream');
      var canvas = document.getElementById('canvas-stream');
      var context = canvas.getContext('2d');
     
      var cw = canvas.clientWidth;
      var ch = canvas.clientHeight;
      canvas.width = cw;
      canvas.height = ch;
     
      video.addEventListener('play', function(){
        draw(this, context, cw, ch);
      }, false);

    });
     
    function draw(v, c, w, h) {
      if(v.paused || v.ended) return false;
      try {      
        c.drawImage(v, 0, 0, w, h);
      }
      catch(err){
        console.log("Error!");
      }
      setTimeout(draw, 20, v, c, w, h);
    }
  </script>
</body>
</html>